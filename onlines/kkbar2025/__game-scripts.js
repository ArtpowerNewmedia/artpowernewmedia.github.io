class FontService{#o;#t;#e;#n=new Map;get _fontCache(){return this.#n}#a=Promise.resolve();constructor(o){console.log("ğŸ—ï¸ FontService å»ºæ§‹å‡½å¼é–‹å§‹"),console.log("  - app:",o),this.#o=o,this.canvasFont=null,console.log("âœ… FontService å»ºæ§‹å®Œæˆ")}async createFont(o,t,e){const n=`${t}_${e}`;return this.#a=this.#a.then((async()=>{let a=this.#n.get(n);if(await this.#s(o,t,e),a){let t=!1;for(const e of o)a.chars.has(e)||(a.chars.add(e),t=!0);if(t){const o=Array.from(a.chars).join("");a.font.createTextures(o),console.log("ğŸ”„ CanvasFont ç´¯åŠ æ–°å­—å…ƒä¸¦é‡å»ºç´‹ç†:",o)}else console.log("â™»ï¸ CanvasFont å·²åŒ…å«æ‰€æœ‰å­—å…ƒï¼Œç„¡éœ€é‡å»º");this.canvasFont=a.font}else{console.log("ğŸ†• å»ºç«‹æ–°çš„ CanvasFont");const e=new pc.CanvasFont(this.#o,{fontName:t,fontSize:128});e.createTextures(o),this.#n.set(n,{font:e,chars:new Set(o)}),this.canvasFont=e,console.log("âœ… CanvasFont å»ºç«‹ä¸¦å¿«å–")}})),this.#a}#c(o,t){console.log("ğŸ“ #writeCharacters() é–‹å§‹"),console.log("  - characters:",o),console.log("  - fontName:",t),this.#t=document.createElement("p"),this.#e=document.createTextNode(o),this.#t.appendChild(this.#e),this.#t.style.fontFamily=t,this.#t.style.visibility="hidden",this.#t.style.position="absolute",document.body.appendChild(this.#t),console.log("âœ… å­—å…ƒå…ƒç´ å·²æ·»åŠ åˆ° DOM")}#s(o,t,e){console.log("ğŸŒ #loadGoogleFonts() é–‹å§‹"),console.log("  - characters:",o),console.log("  - fontName:",t),console.log("  - attributes:",e);let n=this;return new Promise(((a,s)=>{console.log("ğŸ”„ é–‹å§‹ WebFont.load()"),WebFont.load({classes:!1,google:{families:[t+(e||"")],text:o},active:function(){n.#t&&n.#t.remove(),n.#e&&n.#e.remove(),setTimeout((()=>{console.log("â° å­—é«”è¼‰å…¥å»¶é²å®Œæˆ"),a()}),10)},inactive:function(){n.#t&&n.#t.remove(),n.#e&&n.#e.remove(),console.error("âŒ WebFont è¼‰å…¥å¤±æ•—"),s(new Error(`Failed to load font: ${t}`))}})}))}#l(o,t){console.log("ğŸ¨ #createCanvasFont() é–‹å§‹"),console.log("  - characters:",o),console.log("  - fontName:",t),this.canvasFont&&(console.log("ğŸ—‘ï¸ éŠ·æ¯€èˆŠçš„ canvasFont"),this.canvasFont.destroy()),console.log("ğŸ†• å‰µå»ºæ–°çš„ CanvasFont"),this.canvasFont=new pc.CanvasFont(this.#o,{fontName:t,fontSize:128}),console.log("ğŸ“ å‰µå»ºå­—é«”ç´‹ç†"),this.canvasFont.createTextures(o),console.log("âœ… CanvasFont å‰µå»ºå®Œæˆ:",this.canvasFont)}clearCache(){console.log("ğŸ§¹ æ¸…ç†å­—é«”å¿«å–"),this.#n.forEach((o=>{o.font&&o.font.destroy&&o.font.destroy()})),this.#n.clear(),console.log("âœ… å¿«å–æ¸…ç†å®Œæˆ")}}window.EventNames={QUEST_REQUEST:"quest:request",QUEST_BG_REQUEST:"questBG:request"};var DynamicFontLoader=pc.createScript("dynamicFontLoader");DynamicFontLoader.attributes.add("fontName",{type:"string",default:"Roboto"}),DynamicFontLoader.attributes.add("fontBold",{type:"string",default:""}),DynamicFontLoader.attributes.add("defaultText",{type:"string",default:""}),DynamicFontLoader.fontService=null,DynamicFontLoader.prototype.initialize=function(){console.log("ğŸ”§ DynamicFontLoader.initialize() é–‹å§‹åŸ·è¡Œï¼Œå¯¦é«” ID:",this.entity.getGuid()),this.textEntity=this.entity.element,console.log("ğŸ“ æ–‡å­—å¯¦é«”:",this.textEntity),console.log("ğŸ“ é è¨­å­—é«”åç¨±:",this.fontName),console.log("ğŸ“ é è¨­å­—é«”ç²—ç´°:",this.fontBold),console.log("ğŸ“ é è¨­æ–‡å­—:",this.defaultText),DynamicFontLoader.fontService?console.log("â™»ï¸ é‡ç”¨ç¾æœ‰çš„ FontService å¯¦ä¾‹"):(console.log("ğŸ†• å‰µå»ºæ–°çš„ FontService å¯¦ä¾‹"),DynamicFontLoader.fontService=new FontService(this.app)),this.fontService=DynamicFontLoader.fontService,console.log("ğŸ”— FontService å·²åˆ†é…çµ¦å¯¦ä¾‹"),this.defaultText&&""!==this.defaultText.trim()&&(console.log("ğŸ“ ç™¼ç¾é è¨­æ–‡å­—ï¼Œé–‹å§‹è¼‰å…¥å­—é«”..."),this.loadFontAndSetText(this.defaultText,this.fontName,this.fontBold)),console.log("ğŸ DynamicFontLoader.initialize() åŸ·è¡Œå®Œæˆ")},DynamicFontLoader.prototype.loadFontAndSetText=async function(t,o,e){if(console.log("ğŸš€ loadFontAndSetText() é–‹å§‹åŸ·è¡Œ"),console.log("  - text:",t),console.log("  - fontName:",o||this.fontName),console.log("  - fontBold:",e||this.fontBold),!t||""===t.trim())return void console.warn("âš ï¸ æ–‡å­—ç‚ºç©ºï¼Œè·³éå­—é«”è¼‰å…¥");const n=o||this.fontName,i=e||this.fontBold;try{console.log("ğŸ”„ é–‹å§‹è¼‰å…¥å­—é«”..."),await this.fontService.createFont(t,n,":"+i),console.log("âœ… å­—é«”è¼‰å…¥æˆåŠŸ"),console.log("ğŸ“ è¨­ç½®æ–‡å­—å…§å®¹"),this.textEntity.text=t,console.log("ğŸ¨ è¨­ç½®å­—é«”åˆ°æ–‡å­—å¯¦é«”"),this.textEntity.font=this.fontService.canvasFont,console.log("âœ… å­—é«”è¨­ç½®å®Œæˆï¼ŒcanvasFont:",this.fontService.canvasFont),console.log("ğŸ” æª¢æŸ¥å­—é«”è¨­ç½®çµæœ:"),console.log("  - textEntity.font:",this.textEntity.font),console.log("  - textEntity.text:",this.textEntity.text),console.log("  - textEntity.enabled:",this.textEntity.enabled),this.textEntity.font&&(this.textEntity.fire("set","font",this.textEntity.font),console.log("ğŸ”„ æ–‡å­—å¯¦é«”å·²è§¸ç™¼æ›´æ–°äº‹ä»¶")),this.entity.fire("fontLoaded",{text:t,fontName:n,fontBold:i,canvasFont:this.fontService.canvasFont}),console.log("âœ… loadFontAndSetText() åŸ·è¡Œå®Œæˆ")}catch(o){console.error("âŒ å­—é«”è¼‰å…¥å¤±æ•—:",o),console.error("âŒ éŒ¯èª¤å †ç–Š:",o.stack),console.log("ğŸ”„ å˜—è©¦é‡è©¦è¼‰å…¥å­—é«”...");try{await new Promise((t=>setTimeout(t,1e3))),await this.fontService.createFont(t,n,":"+i),this.textEntity.text=t,this.textEntity.font=this.fontService.canvasFont,this.textEntity.fire("set","font",this.textEntity.font),console.log("âœ… é‡è©¦æˆåŠŸ")}catch(o){console.error("âŒ é‡è©¦ä¹Ÿå¤±æ•—:",o),this.entity.fire("fontLoadError",{text:t,fontName:n,fontBold:i,error:o})}}},DynamicFontLoader.prototype.setText=function(t){console.log("ğŸ“ setText() è¨­ç½®æ–‡å­—:",t),this.textEntity.text=t,this.entity.fire("textUpdated",{text:t})},DynamicFontLoader.prototype.loadFont=async function(t,o){console.log("ğŸ¨ loadFont() é–‹å§‹è¼‰å…¥å­—é«”"),console.log("  - fontName:",t||this.fontName),console.log("  - fontBold:",o||this.fontBold);const e=this.textEntity.text||"",n=t||this.fontName,i=o||this.fontBold;if(e&&""!==e.trim())try{await this.fontService.createFont(e,n,":"+i),this.textEntity.font=this.fontService.canvasFont,this.textEntity.fire("set","font",this.textEntity.font),console.log("âœ… å­—é«”è¼‰å…¥å®Œæˆ")}catch(t){throw console.error("âŒ å­—é«”è¼‰å…¥å¤±æ•—:",t),t}else console.warn("âš ï¸ ç•¶å‰æ²’æœ‰æ–‡å­—å…§å®¹ï¼Œç„¡æ³•è¼‰å…¥å­—é«”")},DynamicFontLoader.prototype.updateFontSettings=function(t,o){console.log("âš™ï¸ updateFontSettings() æ›´æ–°å­—é«”è¨­å®š"),console.log("  - æ–°å­—é«”åç¨±:",t),console.log("  - æ–°å­—é«”ç²—ç´°:",o),this.fontName=t||this.fontName,this.fontBold=o||this.fontBold,this.textEntity.text&&""!==this.textEntity.text.trim()&&this.loadFontAndSetText(this.textEntity.text,this.fontName,this.fontBold)},DynamicFontLoader.prototype.preloadFont=async function(t,o,e){if(console.log("â³ preloadFont() é–‹å§‹é è¼‰å…¥å­—é«”"),console.log("  - characters:",t),console.log("  - fontName:",o||this.fontName),console.log("  - fontBold:",e||this.fontBold),!t||""===t.trim())return void console.warn("âš ï¸ å­—å…ƒç‚ºç©ºï¼Œè·³éé è¼‰å…¥");const n=o||this.fontName,i=e||this.fontBold;try{console.log("ğŸ”„ é–‹å§‹é è¼‰å…¥å­—é«”..."),await this.fontService.createFont(t,n,":"+i),console.log("âœ… å­—é«”é è¼‰å…¥æˆåŠŸ"),this.entity.fire("fontPreloaded",{characters:t,fontName:n,fontBold:i,canvasFont:this.fontService.canvasFont}),console.log("âœ… preloadFont() åŸ·è¡Œå®Œæˆ")}catch(o){console.error("âŒ å­—é«”é è¼‰å…¥å¤±æ•—:",o),console.error("âŒ éŒ¯èª¤å †ç–Š:",o.stack),console.log("ğŸ”„ å˜—è©¦é‡è©¦é è¼‰å…¥å­—é«”...");try{await new Promise((t=>setTimeout(t,1e3))),await this.fontService.createFont(t,n,":"+i),console.log("âœ… é‡è©¦é è¼‰å…¥æˆåŠŸ")}catch(o){console.error("âŒ é‡è©¦é è¼‰å…¥ä¹Ÿå¤±æ•—:",o),this.entity.fire("fontPreloadError",{characters:t,fontName:n,fontBold:i,error:o})}}},DynamicFontLoader.prototype.preloadMultipleFonts=async function(t){console.log("ğŸ”„ preloadMultipleFonts() é–‹å§‹æ‰¹é‡é è¼‰å…¥"),console.log("  - å­—é«”é…ç½®æ•¸é‡:",t.length);const o=t.map((t=>{const{characters:o,fontName:e,fontBold:n}=t;return this.preloadFont(o,e,n)}));try{await Promise.all(o),console.log("âœ… æ‰¹é‡é è¼‰å…¥å®Œæˆ"),this.entity.fire("fontsPreloaded",{count:t.length,configs:t})}catch(t){throw console.error("âŒ æ‰¹é‡é è¼‰å…¥å¤±æ•—:",t),t}},DynamicFontLoader.prototype.preloadCommonCharacters=async function(t,o){console.log("ğŸ“ preloadCommonCharacters() é–‹å§‹é è¼‰å…¥å¸¸ç”¨å­—å…ƒ");const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.,!?;:'\"()-+=[]{}<>@#$%^&*_~`|\\/",n=t||this.fontName,i=o||this.fontBold;return console.log("  - å¸¸ç”¨å­—å…ƒ:",e),console.log("  - å­—é«”åç¨±:",n),console.log("  - å­—é«”ç²—ç´°:",i),this.preloadFont(e,n,i)},DynamicFontLoader.prototype.preloadChineseCharacters=async function(t,o){console.log("ğŸ‡¹ğŸ‡¼ preloadChineseCharacters() é–‹å§‹é è¼‰å…¥ä¸­æ–‡å­—å…ƒ");const e="ä½ å¥½ä¸–ç•Œæ­¡è¿ä½¿ç”¨å‹•æ…‹å­—é«”è¼‰å…¥å™¨é€™æ˜¯ä¸€å€‹æ¸¬è©¦çš„ä¸­æ–‡å­—ç¬¦ä¸²æˆ‘å€‘å¯ä»¥é è¼‰å…¥å¸¸ç”¨çš„ä¸­æ–‡å­—å…ƒä¾†æ¸›å°‘é‹è¡Œæ™‚çš„å»¶é²",n=t||"Noto Sans TC",i=o||"";return console.log("  - ä¸­æ–‡å­—å…ƒ:",e),console.log("  - å­—é«”åç¨±:",n),console.log("  - å­—é«”ç²—ç´°:",i),this.preloadFont(e,n,i)},DynamicFontLoader.prototype.preloadJapaneseCharacters=async function(t,o){console.log("ğŸ‡¯ğŸ‡µ preloadJapaneseCharacters() é–‹å§‹é è¼‰å…¥æ—¥æ–‡å­—å…ƒ");const e="ã“ã‚“ã«ã¡ã¯ä¸–ç•Œå‹•çš„ãƒ•ã‚©ãƒ³ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã¸ã‚ˆã†ã“ãã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã®æ—¥æœ¬èªæ–‡å­—åˆ—ã§ã™ã‚ˆãä½¿ã‚ã‚Œã‚‹æ—¥æœ¬èªæ–‡å­—ã‚’äº‹å‰ã«èª­ã¿è¾¼ã‚“ã§å®Ÿè¡Œæ™‚ã®é…å»¶ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™",n=t||"Noto Sans JP",i=o||"";return console.log("  - æ—¥æ–‡å­—å…ƒ:",e),console.log("  - å­—é«”åç¨±:",n),console.log("  - å­—é«”ç²—ç´°:",i),this.preloadFont(e,n,i)},DynamicFontLoader.prototype.isFontPreloaded=function(t,o,e){const n=`${o||this.fontName}_${e||this.fontBold}`,i=this.fontService._fontCache?this.fontService._fontCache.get(n):null;if(!i)return!1;for(const o of t)if(!i.chars.has(o))return!1;return!0},DynamicFontLoader.prototype.update=function(t){},DynamicFontLoader.prototype.destroy=function(){console.log("ğŸ—‘ï¸ DynamicFontLoader.destroy() é–‹å§‹æ¸…ç†"),DynamicFontLoader.fontService};var FontLoader=pc.createScript("fontLoader");FontLoader.attributes.add("fontName",{type:"string"}),FontLoader.attributes.add("fontBold",{type:"string"}),FontLoader.fontService=null,FontLoader.prototype.initialize=async function(){console.log("ğŸ”§ FontLoader.initialize() é–‹å§‹åŸ·è¡Œï¼Œå¯¦é«” ID:",this.entity.getGuid()),this.textEntity=this.entity.element,console.log("ğŸ“ æ–‡å­—å¯¦é«”:",this.textEntity),console.log("ğŸ“ æ–‡å­—å…§å®¹:",this.textEntity.text),console.log("ğŸ“ å­—é«”åç¨±:",this.fontName),console.log("ğŸ“ å­—é«”ç²—ç´°:",this.fontBold),FontLoader.fontService?console.log("â™»ï¸ é‡ç”¨ç¾æœ‰çš„ FontService å¯¦ä¾‹"):(console.log("ğŸ†• å‰µå»ºæ–°çš„ FontService å¯¦ä¾‹"),FontLoader.fontService=new FontService(this.app)),this.fontService=FontLoader.fontService,console.log("ğŸ”— FontService å·²åˆ†é…çµ¦å¯¦ä¾‹");let t=this.textEntity.text;console.log("ğŸ“‹ è¦è¼‰å…¥çš„å­—å…ƒ:",t);try{console.log("ğŸš€ é–‹å§‹è¼‰å…¥å­—é«”..."),await this.fontService.createFont(t,this.fontName,":"+this.fontBold),console.log("âœ… å­—é«”è¼‰å…¥æˆåŠŸ"),console.log("ğŸ¨ è¨­ç½®å­—é«”åˆ°æ–‡å­—å¯¦é«”"),this.textEntity.font=this.fontService.canvasFont,console.log("âœ… å­—é«”è¨­ç½®å®Œæˆï¼ŒcanvasFont:",this.fontService.canvasFont),console.log("ğŸ” æª¢æŸ¥å­—é«”è¨­ç½®çµæœ:"),console.log("  - textEntity.font:",this.textEntity.font),console.log("  - textEntity.text:",this.textEntity.text),console.log("  - textEntity.enabled:",this.textEntity.enabled),this.textEntity.font&&(this.textEntity.fire("set","font",this.textEntity.font),console.log("ğŸ”„ æ–‡å­—å¯¦é«”å·²è§¸ç™¼æ›´æ–°äº‹ä»¶"))}catch(o){console.error("âŒ Font loading failed for entity:",this.entity.getGuid(),o),console.error("âŒ éŒ¯èª¤å †ç–Š:",o.stack),console.log("ğŸ”„ å˜—è©¦é‡è©¦è¼‰å…¥å­—é«”...");try{await new Promise((t=>setTimeout(t,1e3))),await this.fontService.createFont(t,this.fontName,":"+this.fontBold),this.textEntity.font=this.fontService.canvasFont,this.textEntity.fire("set","font",this.textEntity.font),console.log("âœ… é‡è©¦æˆåŠŸ")}catch(t){console.error("âŒ é‡è©¦ä¹Ÿå¤±æ•—:",t)}}console.log("ğŸ FontLoader.initialize() åŸ·è¡Œå®Œæˆ")},FontLoader.prototype.update=function(t){},FontLoader.prototype.destroy=function(){FontLoader.fontService};var SceneManager=pc.createScript("sceneManager");SceneManager.attributes.add("pageHome",{type:"entity"}),SceneManager.attributes.add("pageQuest",{type:"entity"}),SceneManager.attributes.add("pageResult",{type:"entity"}),SceneManager.attributes.add("pageTicket",{type:"entity"}),SceneManager.attributes.add("pageCheckout",{type:"entity"}),SceneManager.attributes.add("pageFinal",{type:"entity"}),SceneManager.attributes.add("btn_Home_Next",{type:"entity"}),SceneManager.attributes.add("btn_Result_Next",{type:"entity"}),SceneManager.attributes.add("btn_Ticket_Next",{type:"entity"}),SceneManager.attributes.add("btn_Ticket_Exchange",{type:"entity"}),SceneManager.prototype.initialize=function(){SceneManager.instance=this,this.pageHome.enabled=!0,this.pageQuest.enabled=!1,this.pageResult.enabled=!1,this.pageTicket.enabled=!1,this.pageCheckout.enabled=!1,this.currentStage=0,this.btn_Home_Next.button.on("click",(function(e){SceneManager.instance.showPage(1),QuestUi.instance.showStage(0)})),this.btn_Result_Next.button.on("click",(e=>{setTimeout((()=>{SceneManager.instance.showPage(3)}),200)})),this.btn_Ticket_Next.button.on("click",(e=>{setTimeout((()=>{SceneManager.instance.showPage(4)}),200)})),this.btn_Ticket_Exchange.button.on("click",(e=>{setTimeout((()=>{SceneManager.instance.showPage(5)}),200)}))},SceneManager.prototype.showPage=function(e){console.log("to pgage "+e),this.pageHome.enabled=0==e,this.pageQuest.enabled=1==e,this.pageResult.enabled=2==e,this.pageTicket.enabled=3==e,this.pageCheckout.enabled=4==e,this.pageFinal.enabled=5==e},SceneManager.prototype.update=function(e){};var QuestManager=pc.createScript("questManager");QuestManager.attributes.add("preloadFontLoader",{type:"entity"}),QuestManager.attributes.add("questBG",{type:"asset",array:!0,assetType:"texture"}),QuestManager.attributes.add("quests",{type:"json",array:!0,schema:[{name:"q",type:"string"},{name:"a0",type:"string"},{name:"a1",type:"string"},{name:"a2",type:"string"},{name:"ans",type:"number"}]}),QuestManager.prototype.initialize=function(){this.app.on(EventNames.QUEST_BG_REQUEST,(function(t,e){var a=this.questBG[t];e&&e(a)}),this),this.app.on(EventNames.QUEST_REQUEST,(function(t,e){var a=this.quests[t];e&&e(a)}),this);let t="";this.quests&&this.quests.length>0&&this.quests.forEach((e=>{e.q&&(t+=e.q),e.a0&&(t+=e.a0),e.a1&&(t+=e.a1),e.a2&&(t+=e.a2)}));const e=[...new Set(t)].join("");console.log("ğŸ“ æ”¶é›†åˆ°çš„æ‰€æœ‰å­—å…ƒ:",t),console.log("ğŸ”¤ å»é‡å¾Œçš„å­—å…ƒ:",e),setTimeout((()=>{this.preloadFontLoader.script.dynamicFontLoader.loadFontAndSetText(e)}),100)},QuestManager.prototype.update=function(t){};var QuestUi=pc.createScript("questUi");QuestUi.attributes.add("background",{type:"entity"}),QuestUi.attributes.add("foregroundYes",{type:"entity"}),QuestUi.attributes.add("foregroundNo",{type:"entity"}),QuestUi.attributes.add("questText",{type:"entity"}),QuestUi.attributes.add("checkBox",{type:"entity",array:!0}),QuestUi.attributes.add("checkBoxOn",{type:"entity",array:!0}),QuestUi.attributes.add("questAns",{type:"entity",array:!0}),QuestUi.attributes.add("questOK",{type:"entity"}),QuestUi.attributes.add("testBG",{type:"asset",assetType:"texture"}),QuestUi.prototype.initialize=function(){QuestUi.instance=this,this.questData=null,this.selectedAns=-1,this.questOK.button.on("click",(t=>{const e=this.selectedAns==this.questData.ans;this.showAnswerFeedback(e),e?setTimeout((()=>{this.handleCorrectAnswer()}),1e3):setTimeout((()=>{this.hideAnswerFeedback()}),500)})),this.checkBox.forEach(((t,e)=>{t.button.on("click",(t=>{this.checkBoxOn.forEach(((t,s)=>{t.enabled=s===e})),this.selectedAns=e}))})),this.foregroundYes.enabled=!1,this.foregroundNo.enabled=!1},QuestUi.prototype.showStage=function(t){this.app.fire(EventNames.QUEST_BG_REQUEST,t,(t=>{this.background.element.textureAsset=t}));const e=3*t+Math.floor(3*Math.random());console.log("******************* ç¾åœ¨çš„é¡Œç›®ID : "+e),console.log("*******************"),console.log("*******************"),console.log("*******************"),this.app.fire(EventNames.QUEST_REQUEST,e,(t=>{this.questData=t,this.questText.script.dynamicFontLoader.loadFontAndSetText(t.q),this.questAns[0].script.dynamicFontLoader.loadFontAndSetText(t.a0),this.questAns[1].script.dynamicFontLoader.loadFontAndSetText(t.a1),this.questAns[2].script.dynamicFontLoader.loadFontAndSetText(t.a2)})),this.hideAnswerFeedback(),this.checkBoxOn.forEach(((t,e)=>{t.enabled=!1})),this.selectedAns=-1},QuestUi.prototype.showAnswerFeedback=function(t){this.foregroundYes.enabled=t,this.foregroundNo.enabled=!t},QuestUi.prototype.hideAnswerFeedback=function(){this.foregroundYes.enabled=!1,this.foregroundNo.enabled=!1},QuestUi.prototype.handleCorrectAnswer=function(){const t=(SceneManager.instance.currentStage+1)%4;0==t?SceneManager.instance.showPage(2):(SceneManager.instance.currentStage=t,this.showStage(t))},QuestUi.prototype.update=function(t){};var FontLoaderExample=pc.createScript("fontLoaderExample");FontLoaderExample.attributes.add("targetTextEntity",{type:"entity",title:"ç›®æ¨™æ–‡å­—å¯¦é«”"}),FontLoaderExample.attributes.add("testText",{type:"string",default:"Hello World!",title:"æ¸¬è©¦æ–‡å­—"}),FontLoaderExample.attributes.add("testFont",{type:"string",default:"Roboto",title:"æ¸¬è©¦å­—é«”"}),FontLoaderExample.prototype.initialize=function(){console.log("ğŸ”§ FontLoaderExample.initialize() é–‹å§‹åŸ·è¡Œ"),this.app.keyboard.on("keydown",this.onKeyDown,this),this.targetTextEntity&&(this.targetTextEntity.on("fontLoaded",this.onFontLoaded,this),this.targetTextEntity.on("fontLoadError",this.onFontLoadError,this),this.targetTextEntity.on("textUpdated",this.onTextUpdated,this),this.targetTextEntity.on("fontPreloaded",this.onFontPreloaded,this),this.targetTextEntity.on("fontPreloadError",this.onFontPreloadError,this),this.targetTextEntity.on("fontsPreloaded",this.onFontsPreloaded,this)),console.log("âœ… FontLoaderExample åˆå§‹åŒ–å®Œæˆ"),console.log("ğŸ“‹ ä½¿ç”¨èªªæ˜:"),console.log("  - æŒ‰ 1: è¼‰å…¥æ¸¬è©¦æ–‡å­—å’Œå­—é«”"),console.log("  - æŒ‰ 2: åªæ›´æ–°æ–‡å­—å…§å®¹"),console.log("  - æŒ‰ 3: åªè¼‰å…¥å­—é«”"),console.log("  - æŒ‰ 4: æ›´æ–°å­—é«”è¨­å®š"),console.log("  - æŒ‰ 5: è¼‰å…¥ä¸­æ–‡æ–‡å­—"),console.log("  - æŒ‰ 6: è¼‰å…¥æ—¥æ–‡æ–‡å­—"),console.log("  - æŒ‰ 7: é è¼‰å…¥å¸¸ç”¨å­—å…ƒ"),console.log("  - æŒ‰ 8: é è¼‰å…¥ä¸­æ–‡å­—å…ƒ"),console.log("  - æŒ‰ 9: é è¼‰å…¥æ—¥æ–‡å­—å…ƒ"),console.log("  - æŒ‰ 0: æ‰¹é‡é è¼‰å…¥å¤šå€‹å­—é«”")},FontLoaderExample.prototype.onKeyDown=function(o){if(!this.targetTextEntity)return void console.warn("âš ï¸ æœªè¨­ç½®ç›®æ¨™æ–‡å­—å¯¦é«”");const t=this.targetTextEntity.script.dynamicFontLoader;if(t)switch(o.key){case pc.KEY_1:console.log("ğŸ¯ 1 æŒ‰ä¸‹: è¼‰å…¥æ¸¬è©¦æ–‡å­—å’Œå­—é«”"),t.loadFontAndSetText(this.testText,this.testFont,"");break;case pc.KEY_2:console.log("ğŸ¯ 2 æŒ‰ä¸‹: åªæ›´æ–°æ–‡å­—å…§å®¹"),t.setText("æ–‡å­—å·²æ›´æ–°! "+(new Date).toLocaleTimeString());break;case pc.KEY_3:console.log("ğŸ¯ 3 æŒ‰ä¸‹: åªè¼‰å…¥å­—é«”"),t.loadFont("Open Sans","");break;case pc.KEY_4:console.log("ğŸ¯ 4 æŒ‰ä¸‹: æ›´æ–°å­—é«”è¨­å®š"),t.updateFontSettings("Lato","700");break;case pc.KEY_5:console.log("ğŸ¯ 5 æŒ‰ä¸‹: è¼‰å…¥ä¸­æ–‡æ–‡å­—"),t.loadFontAndSetText("ä½ å¥½ä¸–ç•Œï¼æ­¡è¿ä½¿ç”¨å‹•æ…‹å­—é«”è¼‰å…¥å™¨ã€‚","Noto Sans TC","");break;case pc.KEY_6:console.log("ğŸ¯ 6 æŒ‰ä¸‹: è¼‰å…¥æ—¥æ–‡æ–‡å­—"),t.loadFontAndSetText("ã“ã‚“ã«ã¡ã¯ä¸–ç•Œï¼å‹•çš„ãƒ•ã‚©ãƒ³ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã¸ã‚ˆã†ã“ãã€‚","Noto Sans JP","");break;case pc.KEY_7:console.log("ğŸ¯ 7 æŒ‰ä¸‹: é è¼‰å…¥å¸¸ç”¨å­—å…ƒ"),t.preloadCommonCharacters("Roboto","");break;case pc.KEY_8:console.log("ğŸ¯ 8 æŒ‰ä¸‹: é è¼‰å…¥ä¸­æ–‡å­—å…ƒ"),t.preloadChineseCharacters();break;case pc.KEY_9:console.log("ğŸ¯ 9 æŒ‰ä¸‹: é è¼‰å…¥æ—¥æ–‡å­—å…ƒ"),t.preloadJapaneseCharacters();break;case pc.KEY_0:console.log("ğŸ¯ 0 æŒ‰ä¸‹: æ‰¹é‡é è¼‰å…¥å¤šå€‹å­—é«”");const o=[{characters:"0123456789",fontName:"Roboto",fontBold:""},{characters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",fontName:"Open Sans",fontBold:"700"},{characters:"ä½ å¥½ä¸–ç•Œ",fontName:"Noto Sans TC",fontBold:""},{characters:"ã“ã‚“ã«ã¡ã¯",fontName:"Noto Sans JP",fontBold:""}];t.preloadMultipleFonts(o)}else console.warn("âš ï¸ ç›®æ¨™å¯¦é«”æ²’æœ‰ DynamicFontLoader è…³æœ¬")},FontLoaderExample.prototype.onFontLoaded=function(o){console.log("ğŸ‰ å­—é«”è¼‰å…¥å®Œæˆäº‹ä»¶:"),console.log("  - æ–‡å­—:",o.text),console.log("  - å­—é«”åç¨±:",o.fontName),console.log("  - å­—é«”ç²—ç´°:",o.fontBold),console.log("  - CanvasFont:",o.canvasFont)},FontLoaderExample.prototype.onFontLoadError=function(o){console.error("âŒ å­—é«”è¼‰å…¥éŒ¯èª¤äº‹ä»¶:"),console.error("  - æ–‡å­—:",o.text),console.error("  - å­—é«”åç¨±:",o.fontName),console.error("  - å­—é«”ç²—ç´°:",o.fontBold),console.error("  - éŒ¯èª¤:",o.error)},FontLoaderExample.prototype.onTextUpdated=function(o){console.log("ğŸ“ æ–‡å­—æ›´æ–°äº‹ä»¶:"),console.log("  - æ–°æ–‡å­—:",o.text)},FontLoaderExample.prototype.onFontPreloaded=function(o){console.log("â³ å­—é«”é è¼‰å…¥å®Œæˆäº‹ä»¶:"),console.log("  - å­—å…ƒ:",o.characters),console.log("  - å­—é«”åç¨±:",o.fontName),console.log("  - å­—é«”ç²—ç´°:",o.fontBold),console.log("  - CanvasFont:",o.canvasFont)},FontLoaderExample.prototype.onFontPreloadError=function(o){console.error("âŒ å­—é«”é è¼‰å…¥éŒ¯èª¤äº‹ä»¶:"),console.error("  - å­—å…ƒ:",o.characters),console.error("  - å­—é«”åç¨±:",o.fontName),console.error("  - å­—é«”ç²—ç´°:",o.fontBold),console.error("  - éŒ¯èª¤:",o.error)},FontLoaderExample.prototype.onFontsPreloaded=function(o){console.log("âœ… æ‰¹é‡å­—é«”é è¼‰å…¥å®Œæˆäº‹ä»¶:"),console.log("  - é è¼‰å…¥æ•¸é‡:",o.count),console.log("  - é…ç½®:",o.configs)},FontLoaderExample.prototype.loadTextWithFont=function(o,t,e){if(!this.targetTextEntity)return void console.warn("âš ï¸ æœªè¨­ç½®ç›®æ¨™æ–‡å­—å¯¦é«”");const n=this.targetTextEntity.script.dynamicFontLoader;if(n)return console.log("ğŸš€ å‹•æ…‹è¼‰å…¥æ–‡å­—å’Œå­—é«”:",o,t,e),n.loadFontAndSetText(o,t,e);console.warn("âš ï¸ ç›®æ¨™å¯¦é«”æ²’æœ‰ DynamicFontLoader è…³æœ¬")},FontLoaderExample.prototype.loadMultipleTexts=async function(o){console.log("ğŸ”„ æ‰¹é‡è¼‰å…¥å¤šå€‹æ–‡å­—å¯¦é«”");const t=o.map((o=>{const{entity:t,text:e,fontName:n,fontBold:a}=o,r=t.script.dynamicFontLoader;return r?r.loadFontAndSetText(e,n,a):(console.warn("âš ï¸ å¯¦é«”æ²’æœ‰ DynamicFontLoader è…³æœ¬:",t.getGuid()),Promise.resolve())}));try{await Promise.all(t),console.log("âœ… æ‰¹é‡è¼‰å…¥å®Œæˆ")}catch(o){console.error("âŒ æ‰¹é‡è¼‰å…¥å¤±æ•—:",o)}},FontLoaderExample.prototype.update=function(o){},FontLoaderExample.prototype.destroy=function(){console.log("ğŸ—‘ï¸ FontLoaderExample.destroy() é–‹å§‹æ¸…ç†"),this.app.keyboard.off("keydown",this.onKeyDown,this),this.targetTextEntity&&(this.targetTextEntity.off("fontLoaded",this.onFontLoaded,this),this.targetTextEntity.off("fontLoadError",this.onFontLoadError,this),this.targetTextEntity.off("textUpdated",this.onTextUpdated,this),this.targetTextEntity.off("fontPreloaded",this.onFontPreloaded,this),this.targetTextEntity.off("fontPreloadError",this.onFontPreloadError,this),this.targetTextEntity.off("fontsPreloaded",this.onFontsPreloaded,this))};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #283538;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #283538;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    width: 100%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #f60;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("div");a.textContent="è®€å–ä¸­",a.style.color="white",a.style.fontSize="24px",a.style.fontWeight="bold",a.style.textAlign="center",t.appendChild(a),t.style.display="block";var o=document.createElement("div");o.id="progress-bar-container",t.appendChild(o);var n=document.createElement("div");n.id="progress-bar",o.appendChild(n)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));